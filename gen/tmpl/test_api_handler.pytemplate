import pytest
from fastapi import FastAPI
from httpx import AsyncClient

from place_project.web.api.place_api_type.place_filename import (
    HandlerResponse,
)


@pytest.mark.anyio
async def test_api_handler(
    client: AsyncClient,
    fastapi_app: FastAPI,
) -> None:
    """Проверка place_filename."""
    url = fastapi_app.url_path_for("handler")
    raw_response = await client.place_method(url)

    response = HandlerResponse.model_validate(raw_response.json())
    assert raw_response.status_code == 200
    assert response
