# <span style="color:#FF0000">üìö –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø</span>

## Backend –ø—Ä–æ–µ–∫—Ç–∞ Store

---

# <span style="color:#1E90FF">–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –≤ –∑–∞–∫–∞–∑</span>

---

## üîó **API —Å–µ—Ä–≤–∏—Å–∞**:

* ### ‚úèÔ∏è –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç–æ–¥–∞:
## –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –≤ –∑–∞–∫–∞–∑:

  `POST /api/store/public/orders/{order_id}/items`

  –í —Ç–µ–ª–µ –∑–∞–ø—Ä–æ—Å–∞ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
  * `product_id` - –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ç–æ–≤–∞—Ä–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä)
  * `quantity` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä)
  * `order_id` - –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–∫–∞–∑–∞ (–≤ –ø—É—Ç–∏ –∑–∞–ø—Ä–æ—Å–∞ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è id –∑–∞–∫–∞–∑–∞)

    

* ### üìö –û–ø–∏—Å–∞–Ω–∏–µ –º–µ—Ç–æ–¥–∞:
   –ú–µ—Ç–æ–¥ –ø—É–±–ª–∏—á–Ω—ã–π. –í –∏–¥–µ–∞–ª–µ —Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–¥–æ–ª–∂–Ω–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∞).
  –†–µ–∞–ª–∏–∑—É–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –≤ –∑–∞–∫–∞–∑. –ï—Å–ª–∏ —Ç–æ–≤–∞—Ä —É–∂–µ –µ—Å—Ç—å –≤ –∑–∞–∫–∞–∑–µ, —Ç–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ.
  –ü—Ä–∏ —ç—Ç–æ–º –º—ã –ø—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —Ç–æ–≤–∞—Ä–∞. –ò –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ–º –æ—à–∏–±–∫—É, –µ—Å–ª–∏ —Ç–æ–≤–∞—Ä–∞ –Ω–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏.
  –¢–∞–∫ –∂–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.(–ï—Å–ª–∏ –∑–∞–∫–∞–∑ –Ω–µ –Ω–∞–π–¥–µ–Ω, —Ç–æ –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞).
  (–í —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –Ω–µ –Ω—É–∂–Ω–∞, —Ç–∞–∫ –∫–∞–∫ –∏ —Ç–æ–≤–∞—Ä –∏ –∑–∞–∫–∞–∑ —É–∂–µ –±—É–¥—É—Ç –≤ –Ω–∞–ª–∏—á–∏–∏).

    
  

*–ø—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:*

  ```json
  {
  "order_id": 1,
  "product_id": 1,
  "order_quantity": 1
}
  ```

## üöÄ **–ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ Docker:**

```bash
docker-compose -f deploy/docker-compose.yml --project-directory . up
```

## üöÄ –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

–î–æ–±–∞–≤–ª—è–µ–º –≤ .env

```bash
STORE_SERVICEDB_HOST=127.0.0.1
STORE_SERVICEDB_PORT=5432
STORE_SERVICEDB_USER=store
STORE_SERVICEDB_PASSWORD=store
STORE_SERVICEDB_BASE_NAME=store
```

```bash
python store/web/main.py
```

```bash
./entrypoint.sh start_app
```

## üìà –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π:

***—Å–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π:***

```bash
python common/service_db/migrator.py create {name}
```

***upgrade –º–∏–≥—Ä–∞—Ü–∏–π:***

```bash
python common/service_db/migrator.py upgrade
```

***downgrade –º–∏–≥—Ä–∞—Ü–∏–π:***

```bash
python common/service_db/migrator.py downgrade
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—à–∏–±–æ–∫:

### 1. üÜò Help –¥–ª—è entrypoint (–ø—Ä–æ—Å–º–æ—Ç—Ä –∫–æ–º–∞–Ω–¥ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

```bash
./entrypoint.sh help
```
### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
    –ü—Ä–æ–≤–µ–¥–µ–Ω–æ –≤ —Ä—É—á–Ω–æ–º —Ä–µ–∂–∏–º–µ —á–µ—Ä–µ–∑ Swagger UI –∏ Postman.
    –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ DBeaver –±—ã–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã —Å—É—â–Ω–æ—Å—Ç–∏ —Ç–æ–≤–∞—Ä–∞, –∫–ª–∏–µ–Ω—Ç–∞, –∑–∞–∫–∞–∑–∞ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π.
    –° –ø–æ–º–æ—â—å—é –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ä—É—á–∫–∏ `/api/store/public/orders/{order_id}/items` –º–æ–∂–Ω–æ –±—ã–ª–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ 
    –≤ —Ç–∞–±–ª–∏—Ü—É order_item –∞ —Ç–∞–∫–∂–µ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –µ—Å–ª–∏ —Ç–æ–≤–∞—Ä —É–∂–µ –±—ã–ª –≤ –∑–∞–∫–∞–∑–µ.
    –í —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ —á–µ—Ä–µ–∑ pytest. (–ù–∞–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–π –±–∞–∑—ã, —Ñ–∞–±—Ä–∏–∫,
    –º–æ–¥–µ–ª–µ–π, –∏ –º–µ—Ç–æ–¥–æ–≤ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–±—Ä–∏–∫–∞–º–∏, –∞ —Ç–∞–∫ –∂–µ –∫–æ–Ω—Ñ—Ç–µ—Å—Ç–æ–≤ –∏ —Ç–µ—Å—Ç–æ–≤ –∫ –Ω–∏–º.)
    –ü—Ä–∏–º–µ—Ä—ã —Å–∫—Ä–∏–Ω–æ–≤ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏–≤–µ–¥–µ–Ω—ã –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∫ –∑–∞–¥–∞–Ω–∏—é.
